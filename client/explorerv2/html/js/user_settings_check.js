$(function() {	passwordcheckid_mgmt=2;	emailcheckid_mgmt=2;	emailmatchcheckid_mgmt=0;	dataupdated=0;});$( "#updatebutton" ).click(function() {	if (dataupdated==1)	{		if(emailcheckid_mgmt==1 || emailmatchcheckid_mgmt==1)		{			$( "#email1_mgmt" ).animate({				backgroundColor: "#FF5959",				color: "#fff",			}, 500 );			$( "#email1_mgmt" ).animate({			  backgroundColor: "#fff",			  color: "#000",			}, 500 );			$( "#email2_mgmt" ).animate({				backgroundColor: "#FF5959",				color: "#fff",			}, 500 );			$( "#email2_mgmt" ).animate({			  backgroundColor: "#fff",			  color: "#000",			}, 500 );		}		if(passwordcheckid_mgmt==1)		{			$( "#password1_mgmt" ).animate({				backgroundColor: "#FF5959",				color: "#fff",			}, 500 );			$( "#password1_mgmt" ).animate({			  backgroundColor: "#fff",			  color: "#000",			}, 500 );			$( "#password2_mgmt" ).animate({				backgroundColor: "#FF5959",				color: "#fff",			}, 500 );			$( "#password2_mgmt" ).animate({			  backgroundColor: "#fff",			  color: "#000",			}, 500 );		}		if(emailcheckid_mgmt!=1 && emailmatchcheckid_mgmt!=1 && passwordcheckid_mgmt!=1) {			updateuserdata($( "#email1_mgmt" ).val(), $( "#password1_mgmt" ).val(), $('#currentpassword').val());		} else {			$.notify("A Problem occured. Please review your request.","error");		}		}	else {		$.notify("Nothing changed. Update is not necessary.","info");	}});$( "#email1_mgmt" ).keyup(function() {	$.checkemail_mgmt();	dataupdated=1;});$( "#email2_mgmt" ).keyup(function() {	$.checkemail_mgmt();	dataupdated=1;});$( "#password1_mgmt" ).keyup(function() {	$.checkpassword_mgmt();	dataupdated=1;});$( "#password2_mgmt" ).keyup(function() {	$.checkpassword_mgmt();	dataupdated=1;});$.checkpassword_mgmt = function() {var pw1 = $('#password1_mgmt').val();var pw2 = $('#password2_mgmt').val();if (pw1.length>0 || pw2.length>0){	if (pw1==pw2)	{		$('#pw-similar-check_mgmt').html('<i class="fa green fa-check fa-fw"></i> Passwords match');		passwordcheckid_mgmt=0;	}	else	{		$('#pw-similar-check_mgmt').html('<i class="fa red fa-times fa-fw"></i> Passwords doesn\'t match');		passwordcheckid_mgmt=1;	}}else{	$('#pw-similar-check_mgmt').html('');	passwordcheckid_mgmt=1;}var pwstrength=$.pwstrength_mgmt(pw1);if (pw1.length>0){	if (pwstrength == 0)	{		$('#pw-strength-check_mgmt').html('<i class="fa red fa-circle fa-fw"></i><i class="fa orange fa-circle-o fa-fw"></i><i class="fa light-orange fa-circle-o fa-fw"></i><i class="fa light-green fa-circle-o fa-fw"></i><i class="fa green fa-circle-o fa-fw"></i>');	}	if (pwstrength == 1)	{		$('#pw-strength-check_mgmt').html('<i class="fa red fa-circle fa-fw"></i><i class="fa orange fa-circle fa-fw"></i><i class="fa light-orange  fa-circle-o fa-fw"></i><i class="fa light-green fa-circle-o fa-fw"></i><i class="fa green fa-circle-o fa-fw"></i>');	}	if (pwstrength == 2)	{		$('#pw-strength-check_mgmt').html('<i class="fa red fa-circle fa-fw"></i><i class="fa orange fa-circle fa-fw"></i><i class="fa light-orange  fa-circle fa-fw"></i><i class="fa light-green fa-circle-o fa-fw"></i><i class="fa green fa-circle-o fa-fw"></i>');	}	if (pwstrength == 3)	{		$('#pw-strength-check_mgmt').html('<i class="fa red fa-circle fa-fw"></i><i class="fa orange fa-circle fa-fw"></i><i class="fa light-orange  fa-circle fa-fw"></i><i class="fa light-green fa-circle fa-fw"></i><i class="fa green fa-circle-o fa-fw"></i>');	}	if (pwstrength == 4)	{		$('#pw-strength-check_mgmt').html('<i class="fa red fa-circle fa-fw"></i><i class="fa orange fa-circle fa-fw"></i><i class="fa light-orange  fa-circle fa-fw"></i><i class="fa light-green fa-circle fa-fw"></i><i class="fa green fa-circle fa-fw"></i>');	}}else{	$('#pw-strength-check_mgmt').html('');}};$.checkemail_mgmt = function() {var email1 = $('#email1_mgmt').val();var email2 = $('#email2_mgmt').val();email1=email1.replace(/ /g,'');$('#email1_mgmt').val(email1);email2=email2.replace(/ /g,'');$('#email2_mgmt').val(email2);var emailcheck=$.isemail_mgmt(email1);if (email1.length>0){	if (emailcheck === 0)	{		$('#email-check_mgmt').html('<i class="fa red fa-times fa-fw"></i> Please enter a valid E-Mail address');		emailcheckid_mgmt=1;	}	else	{		$('#email-check_mgmt').html('<i class="fa green fa-check fa-fw"></i> E-Mail address is valid');		emailcheckid_mgmt=0;	}}else{	$('#email-check_mgmt').html('');	emailcheckid_mgmt=1;}if (email1.length>3 && email2.length>3){	if (email1.toLowerCase()==email2.toLowerCase())	{		$('#email-similar-check_mgmt').html('<i class="fa green fa-check fa-fw"></i> E-Mails match');		emailmatchcheckid_mgmt=0;	}	else	{		$('#email-similar-check_mgmt').html('<i class="fa red fa-times fa-fw"></i> E-Mails doesn\'t match');		emailmatchcheckid_mgmt=1;	}}else{	$('#email-similar-check_mgmt').html('');	emailcheckid_mgmt=1;}if (email1.length==0 || email2.length==0) {	emailcheckid_mgmt=0;}if (email2.length==0) {	emailcheckid_mgmt=2;}};$.pwstrength_mgmt = function(password) {	var score = 0, length = password.length, upperCase, lowerCase, digits, nonAlpha;        	if(length < 5) score += 0;	else if(length < 8) score += 5;	else if(length < 15) score += 10;	else if(length < 20) score += 20;	else score += 50;        	lowerCase = password.match(/[a-z]/g);	if(lowerCase) score += 1;        	upperCase = password.match(/[A-Z]/g);	if(upperCase) score += 2;        	if(upperCase && lowerCase) score += 5;        	digits = password.match(/\d/g);	if(digits && digits.length > 1) score += 5;        	nonAlpha = password.match(/\W/g)	if(nonAlpha) score += (nonAlpha.length > 1) ? 15 : 10;        	if(upperCase && lowerCase && digits && nonAlpha) score += 15;	if(password.match(/\s/)) score += 10;	if(score < 10) return 0;	if(score < 15) return 1;	if(score < 30) return 2;	if(score < 50) return 3;	return 4;};$.isemail_mgmt = function(email) {	var score = 0, length=email.length, withat, withdot, lastchar;        	if(length > 5) score += 1;		withat = email.match(/[@]/g);	if(withat) score += 1;		withdot = email.substr(email.indexOf('@'));	withdot = withdot.match(/[.]/g);	if(withdot) score += 1;		lastchar=email.slice(-1)	if(lastchar.match(/[a-z]/g)) score += 1;		if(score == 4) return 1;	return 0;};function updateuserdata(email,password,currentpassword){		if (passwordcheckid_mgmt=='2') {		changepassword=0;	} else {		changepassword=1;	}	if (emailcheckid_mgmt=='2') {		changeemail=0;	} else {		changeemail=1;	}	var request = $.ajax({		type: "POST",		url: "/usrmgmt/process_modification.php",		data: { email: email, changeemail: changeemail, changepassword: changepassword, password: password, currentpassword: currentpassword }	});	request.done(function( response ) {		if (response=='0')		{			$.notify("Data has been updated","success");		}		else if (response=='1')		{			$.notify("Wrong password","error");			$( "#currentpassword" ).animate({			backgroundColor: "#FF5959",			color: "#fff",			}, 500 );			$( "#currentpassword" ).animate({			  backgroundColor: "#fff",			  color: "#000",			}, 500 );		}		else if (response=='2')		{			$.notify("Request was incomplete","error");		}		else if (response=='127')		{			window.location = "/wallet";		}		else		{			$.notify(response,"error");		}				});}